---
title: "ST558 Project 2"
author: "Shyam Gadhwala & Kamlesh Pandey"
date: "9/28/2022"
output: github_document
---

# About the API 
 
 DONKI


3.

# Required library 

Following packages are used for this project

```{r, warning=FALSE, message=FALSE}
library(httr)
library(tidyverse)
library(jsonlite)
library(dplyr)

```


# The NASA API has 

```{r}
URL     <- 'https://api.nasa.gov/DONKI/'

api_key <-  'igUogzKaubKUi5TTgsbYcdVgU8pICrvizcCrCtY5'

fillapi <- function(url, startEnd, endDate){
  return(paste0(url, "CME?", "startDate=", startEnd, "&endDate=", endDate, "&api_key=", api_key))
}

# Accessing data from API
#res <- GET(url = paste(URL, api.key, sep = '?api_key='))
res <- GET(fillapi(URL, "2019-01-01", "2021-01-01"))

#print(str(res, max.level = 1))

# converting into a data frame

nasa.data <- fromJSON(rawToChar(res$content))

# to know more about the structure of the datatset
#print(str(nasa.data, max.level = 1))

#print(nasa.data)
#names(nasa.data)
```

```{r, warning=FALSE, message=FALSE}
op <- as_tibble(matrix(nasa.data$cmeAnalyses))
op

lat = c()
lon = c()
hA = c()
speed = c()
for (i in 1:length(nasa.data$cmeAnalyses)){
  lat <- append(lat, nasa.data$cmeAnalyses[[i]]$latitude)
}
#op$centroid_coordinates

```